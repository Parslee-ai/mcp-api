@page "/auth/logout"
@using McpApi.Web.Services
@inject CustomAuthenticationStateProvider AuthStateProvider
@inject NavigationManager Navigation

<PageTitle>Logout - MCP-API</PageTitle>

<div class="row justify-content-center">
    <div class="col-md-6 col-lg-4">
        <div class="card mt-5">
            <div class="card-body text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Logging out...</span>
                </div>
                <p class="mt-2">Logging out...</p>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await AuthStateProvider.LogoutAsync();
            Navigation.NavigateTo("/auth/login");
        }
    }
}
